<!DOCTYPE html>
<html>
<head>
    <title>Game UAS Grafika</title>
    <style>
        body { 
            text-align: center; 
            background: #1a1a2e;
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px; 
        }
        canvas { 
            background: #000; 
            display: block; 
            margin: 20px auto; 
            border: 4px solid #4e4eef; 
            box-shadow: 0 0 20px rgba(78, 78, 239, 0.5);
            cursor: none; 
        }
    </style>
</head>
<body>
    <h1>Dodge the Block</h1>
    <h3>Skor: <span id="scoreVal">0</span></h3>
    <canvas id="game" width="400" height="500"></canvas>

    <script>
        const canvas = document.getElementById("game");
        const ctx = canvas.getContext("2d");
        const scoreDisplay = document.getElementById("scoreVal");

        let player = { x: 180, y: 440, w: 40, h: 40 };
        let enemy = { x: Math.random() * 360, y: 0, w: 40, h: 40 };
        let enemyGrey = { x: Math.random() * 360, y: -200, w: 40, h: 40, speed: 3 };
        let score = 0;

        
        let stars = [];
        for(let i = 0; i < 50; i++) {
            stars.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: Math.random() * 2,
                speed: Math.random() * 2 + 1
            });
        }

        canvas.onmousemove = (e) => {
            player.x = e.offsetX - player.w / 2;
        };

        function gameOver() {
            alert("Game Over! Skor Anda: " + score);
            enemy.y = 0;
            enemyGrey.y = -250;
            score = 0;
            scoreDisplay.innerText = score;
        }

        function drawBackground() {
            ctx.fillStyle = "white";
            stars.forEach(star => {
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx.fill();
                
                star.y += star.speed;
                if(star.y > canvas.height) star.y = 0;
            });
        }

        function draw() {
            ctx.fillStyle = "black";
            ctx.fillRect(0, 0, 400, 500);

            drawBackground();

            ctx.fillStyle = "blue";
            ctx.fillRect(player.x, player.y, player.w, player.h);

            ctx.fillStyle = "red";
            ctx.fillRect(enemy.x, enemy.y, enemy.w, enemy.h);

            ctx.fillStyle = "brown";
            ctx.fillRect(enemyGrey.x, enemyGrey.y, enemyGrey.w, enemyGrey.h);

            enemy.y += 5;
            enemyGrey.y += enemyGrey.speed;

            if (enemy.y > 500) {
                enemy.y = 0;
                enemy.x = Math.random() * 360;
                score++;
                scoreDisplay.innerText = score;
            }

            if (enemyGrey.y > 500) {
                enemyGrey.y = -50;
                enemyGrey.x = Math.random() * 360;
                score++;
                scoreDisplay.innerText = score;
            }
            
            if (player.x < enemy.x + enemy.w && player.x + player.w > enemy.x &&
                player.y < enemy.y + enemy.h && player.y + player.h > enemy.y) {
                gameOver();
            }
           
            if (player.x < enemyGrey.x + enemyGrey.w && player.x + player.w > enemyGrey.x &&
                player.y < enemyGrey.y + enemyGrey.h && player.y + player.h > enemyGrey.y) {
                gameOver();
            }

            requestAnimationFrame(draw);
        }
        draw();
    </script>
</body>
</html>
